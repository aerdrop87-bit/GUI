{% set path = request.path or '/' %}
{% set route_title = 'Ringkasan Dashboard' %}
{% set route_group = 'Dashboard' %}

{% if path == '/' or path.startswith('/dashboard') %}
    {% set route_title = 'Ringkasan Dashboard' %}
    {% set route_group = 'Dashboard' %}
{% elif path.startswith('/upload') %}
    {% set route_title = 'Unggah Dataset' %}
    {% set route_group = 'Upload' %}
{% elif path.startswith('/preprocessing') %}
    {% set route_title = 'Preprocessing' %}
    {% set route_group = 'Preprocessing' %}
{% elif path.startswith('/pca') %}
    {% set route_title = 'Analisis PCA' %}
    {% set route_group = 'PCA' %}
{% elif path.startswith('/clustering') %}
    {% set route_title = 'Hasil Clustering' %}
    {% set route_group = 'Clustering' %}
{% elif path.startswith('/rf') %}
    {% set route_title = 'Prediksi Random Forest' %}
    {% set route_group = 'Random Forest' %}
{% elif path.startswith('/evaluasi') %}
    {% set route_title = 'Metrik Evaluasi' %}
    {% set route_group = 'Evaluasi' %}
{% elif path.startswith('/visualisasi') %}
    {% set route_title = 'Visualisasi Data' %}
    {% set route_group = 'Visualisasi' %}
{% elif path.startswith('/unduh') %}
    {% set route_title = 'Unduh Laporan' %}
    {% set route_group = 'Unduh' %}
{% elif path.startswith('/pengaturan') %}
    {% set route_title = 'Pengaturan' %}
    {% set route_group = 'Pengaturan' %}
{% endif %}

{% set explicit_title = '' %}
{% if self is defined and self.page_title is defined %}
    {% set explicit_title = self.page_title() | striptags | trim %}
{% endif %}
{% set final_title = explicit_title if explicit_title else route_title %}

<header class="w-full h-16 border-b border-slate-200 bg-white px-6 py-4 fixed">
    <div class="flex h-full items-center justify-between gap-4">
        <div class="min-w-0">
            <h1 class="truncate text-lg font-semibold tracking-tight text-slate-900 sm:text-xl">{{ final_title }}</h1>
            <div class="mt-0.5 flex items-center gap-2 text-xs text-slate-500">
                <span>Home</span>
                <span class="text-slate-300">/</span>
                <span class="font-medium text-slate-600">{{ route_group }}</span>
            </div>
        </div>

        <div class="flex items-center gap-2 sm:gap-3">
            <span class="hidden rounded-full border border-cyan-200 bg-cyan-50 px-3 py-1 text-xs font-medium text-cyan-700 lg:inline-flex">
                {{ request.endpoint or 'route' }}
            </span>
            <span class="inline-flex items-center gap-2 rounded-full border border-emerald-200 bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-700">
                <span class="h-2 w-2 rounded-full bg-emerald-500"></span>
                Sistem Aktif
            </span>
        </div>
    </div>
</header>
